## cpio コマンド

`cpio`（copy in and out）は、ファイルアーカイブを作成、抽出、一覧表示するための Unix/Linux コマンドです。
[[tar]] と似たコマンド．

## 基本的な機能

`cpio` は主に3つの操作モードを持っています：

- **コピーアウトモード** (`-o`): アーカイブを作成
- **コピーインモード** (`-i`): アーカイブからファイルを抽出
- **パススルーモード** (`-p`): ==ファイルシステム間でファイルをコピー==

## 一般的な使用方法

### アーカイブの作成
```bash
find . -name "*.txt" | cpio -ov > archive.cpio
```

### アーカイブからのファイル抽出
```bash
cpio -iv < archive.cpio
```

### ディレクトリ間のファイルコピー
```bash
find . -depth -print | cpio -pdmv /path/to/destination
```

## よく使われるオプション

- `-i`: コピーインモード（抽出）
- `-o`: コピーアウトモード（作成）
- `-p`: パススルーモード
- `-v`: 詳細表示（処理されるファイル名を表示）
- `-d`: 必要に応じてディレクトリを作成
- `-m`: ファイルの修正時刻を保持
- `-t`: アーカイブの内容を一覧表示

## 特徴

- 異なるアーカイブ形式（bin、odc、newc、crc、tar）をサポート
- 大規模なバックアップやシステム復元に利用される
- RPMパッケージの内部で使用されている
- システムの初期RAMディスク（initramfs/initrd）の作成に使用される

## tarとの違い

- `cpio` は標準入力からファイルを読み取る，`tar` はファイル名を引数として受け取る。
- `cpio` はシステムレベルのバックアップや特殊な状況でよく使用されますが、一般的なアーカイブ作成には `tar` の方が広く使われています。
- `cpio` には，`-p` モードがある．
